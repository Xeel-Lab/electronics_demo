{
  "apps": {
    "http": {
      "servers": {
        "srv0": {
          "listen": ["127.0.0.1:80"],
          "routes": [
            {
              "match": [
                {
                  "path": ["/mcp*"]
                }
              ],
              "handle": [
                {
                  "handler": "reverse_proxy",
                  "upstreams": [
                    { "dial": "127.0.0.1:8000" }
                  ],
                  "headers": {
                    "request": {
                      "set": {
                      "Accept": ["application/json, text/event-stream"]
                      }
                    }
                  },
                  "flush_interval": -1
                }
              ]
            },
            {
              "match": [
                {}
              ],
              "handle": [
                {
                  "handler": "reverse_proxy",
                  "upstreams": [
                    { "dial": "127.0.0.1:4444" }
                  ],
                  "headers": {
                    "request": {
                      "set": {
                        "Accept": ["text/javascript", "application/javascript", "*/*"]
                      }
                    }
                  },
                  "flush_interval": -1
                }
              ]
            }
          ],
          "automatic_https": {
            "disable": true
          }
        }
      }
    }
  }
}